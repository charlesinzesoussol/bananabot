<!DOCTYPE html>
<html>
<head>
    <title>BananaBot Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 1200px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .card { background: #2d2d2d; padding: 20px; border-radius: 10px; border: 1px solid #444; }
        .metric { text-align: center; padding: 20px; }
        .metric h3 { margin: 0; color: #4CAF50; }
        .metric .value { font-size: 2em; font-weight: bold; }
        canvas { max-height: 300px; }
        .status.online { color: #4CAF50; }
        .status.offline { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçå BananaBot Monitoring Dashboard</h1>
        
        <div class="grid">
            <div class="card metric">
                <h3>Bot Status</h3>
                <div class="value status" id="status">Loading...</div>
            </div>
            <div class="card metric">
                <h3>Memory Usage</h3>
                <div class="value" id="memory">Loading...</div>
            </div>
            <div class="card metric">
                <h3>Disk Usage</h3>
                <div class="value" id="disk">Loading...</div>
            </div>
            <div class="card metric">
                <h3>Images Generated (24h)</h3>
                <div class="value" id="generations">Loading...</div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h3>Memory Usage Over Time</h3>
                <canvas id="memoryChart"></canvas>
            </div>
            <div class="card">
                <h3>Image Generation Activity</h3>
                <canvas id="activityChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Load latest metrics and create charts
        async function loadMetrics() {
            try {
                // In a real implementation, load from your metrics JSON files
                // For now, showing sample data structure
                const sampleData = {
                    status: 'active',
                    memory: '45.2%',
                    disk: '23%', 
                    generations: '127'
                };
                
                // Update metrics display
                document.getElementById('status').textContent = sampleData.status;
                document.getElementById('status').className = `value status ${sampleData.status === 'active' ? 'online' : 'offline'}`;
                document.getElementById('memory').textContent = sampleData.memory;
                document.getElementById('disk').textContent = sampleData.disk;
                document.getElementById('generations').textContent = sampleData.generations;
                
                // Create charts with sample data
                createCharts();
                
            } catch (error) {
                console.error('Failed to load metrics:', error);
            }
        }
        
        function createCharts() {
            // Memory usage chart
            const memCtx = document.getElementById('memoryChart').getContext('2d');
            new Chart(memCtx, {
                type: 'line',
                data: {
                    labels: ['12:00', '12:15', '12:30', '12:45', '13:00'],
                    datasets: [{
                        label: 'Memory %',
                        data: [42, 45, 43, 47, 45],
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    },
                    scales: {
                        x: { ticks: { color: 'white' }, grid: { color: '#444' } },
                        y: { ticks: { color: 'white' }, grid: { color: '#444' } }
                    }
                }
            });
            
            // Activity chart
            const actCtx = document.getElementById('activityChart').getContext('2d');
            new Chart(actCtx, {
                type: 'bar',
                data: {
                    labels: ['12:00', '12:15', '12:30', '12:45', '13:00'],
                    datasets: [{
                        label: 'Images Generated',
                        data: [5, 8, 3, 12, 7],
                        backgroundColor: '#FF9800',
                        borderColor: '#F57F17',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    },
                    scales: {
                        x: { ticks: { color: 'white' }, grid: { color: '#444' } },
                        y: { ticks: { color: 'white' }, grid: { color: '#444' } }
                    }
                }
            });
        }
        
        // Load data when page loads
        loadMetrics();
        
        // Refresh every 5 minutes
        setInterval(loadMetrics, 5 * 60 * 1000);
    </script>
</body>
</html>