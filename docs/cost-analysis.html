<!DOCTYPE html>
<html>
<head>
    <title>BananaBot Cost Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0; }
        .card { background: #ffffff; padding: 25px; border-radius: 12px; border: 2px solid #e1e8ed; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .metric { text-align: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; margin: 10px 0; }
        .metric h3 { margin: 0; font-size: 14px; opacity: 0.9; }
        .metric .value { font-size: 28px; font-weight: bold; margin: 5px 0; }
        canvas { max-height: 400px; }
        .cost-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .cost-table th, .cost-table td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
        .cost-table th { background: #f8f9fa; font-weight: 600; }
        .highlight { background: #e8f5e8; }
        .warning { background: #fff3cd; }
        .danger { background: #f8d7da; }
        .savings { color: #28a745; font-weight: bold; }
        .cost { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçå BananaBot Cost Analysis & Projections</h1>
        
        <div class="grid">
            <div class="metric">
                <h3>Current Rate Limit</h3>
                <div class="value">3/hour</div>
            </div>
            <div class="metric">
                <h3>Max Daily Cost/User</h3>
                <div class="value">$2.81</div>
            </div>
            <div class="metric">
                <h3>Batch Savings</h3>
                <div class="value">50%</div>
            </div>
            <div class="metric">
                <h3>Safe User Limit</h3>
                <div class="value">500</div>
            </div>
        </div>

        <div class="card">
            <h3>üìä Cost Projection by User Count</h3>
            <canvas id="costChart"></canvas>
        </div>

        <div class="grid">
            <div class="card">
                <h3>üí∞ Monthly Cost Scenarios</h3>
                <table class="cost-table">
                    <thead>
                        <tr>
                            <th>Active Users</th>
                            <th>Images/Day</th>
                            <th>Regular Cost</th>
                            <th>With Batching</th>
                            <th>Monthly Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="highlight">
                            <td>10</td>
                            <td>720</td>
                            <td>$28.08</td>
                            <td class="savings">$14.04</td>
                            <td class="savings">$421/month</td>
                        </tr>
                        <tr class="highlight">
                            <td>25</td>
                            <td>1,800</td>
                            <td>$70.20</td>
                            <td class="savings">$35.10</td>
                            <td class="savings">$1,053/month</td>
                        </tr>
                        <tr class="warning">
                            <td>50</td>
                            <td>3,600</td>
                            <td>$140.40</td>
                            <td class="cost">$70.20</td>
                            <td class="cost">$2,106/month</td>
                        </tr>
                        <tr class="warning">
                            <td>100</td>
                            <td>7,200</td>
                            <td>$280.80</td>
                            <td class="cost">$140.40</td>
                            <td class="cost">$4,212/month</td>
                        </tr>
                        <tr class="danger">
                            <td>500</td>
                            <td>36,000</td>
                            <td>$1,404.00</td>
                            <td class="cost">$702.00</td>
                            <td class="cost">$21,060/month</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card">
                <h3>‚ö° Rate Limit Protection Analysis</h3>
                <canvas id="protectionChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h3>üìà Growth Scenarios</h3>
            <canvas id="growthChart"></canvas>
        </div>

        <div class="card">
            <h3>üéØ Recommendations</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4 style="color: #28a745;">‚úÖ Safe Growth Zone (1-25 users)</h4>
                    <ul>
                        <li><strong>Cost:</strong> $15-35/day manageable</li>
                        <li><strong>Revenue model:</strong> Optional donations</li>
                        <li><strong>Risk:</strong> Very low</li>
                        <li><strong>Action:</strong> Monitor and grow organically</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #ffc107;">‚ö†Ô∏è Caution Zone (25-100 users)</h4>
                    <ul>
                        <li><strong>Cost:</strong> $35-140/day significant</li>
                        <li><strong>Revenue model:</strong> Premium subscriptions needed</li>
                        <li><strong>Risk:</strong> Medium</li>
                        <li><strong>Action:</strong> Implement user tiers</li>
                    </ul>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <h4 style="color: #dc3545;">üö® High Risk Zone (100+ users)</h4>
                <ul>
                    <li><strong>Cost:</strong> $140+/day expensive</li>
                    <li><strong>Revenue model:</strong> Required before scaling</li>
                    <li><strong>Risk:</strong> High cost without revenue</li>
                    <li><strong>Action:</strong> Mandatory payment system</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Cost projection chart
        const costCtx = document.getElementById('costChart').getContext('2d');
        new Chart(costCtx, {
            type: 'line',
            data: {
                labels: ['10', '25', '50', '100', '250', '500'],
                datasets: [{
                    label: 'Regular API Cost/Day',
                    data: [28.08, 70.20, 140.40, 280.80, 702.00, 1404.00],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'With Batch Savings/Day', 
                    data: [14.04, 35.10, 70.20, 140.40, 351.00, 702.00],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.1)', 
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Daily Cost by Active User Count (3 images/hour/user)'
                    },
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Active Users'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Daily Cost (USD)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value;
                            }
                        }
                    }
                }
            }
        });

        // Rate limit protection chart
        const protCtx = document.getElementById('protectionChart').getContext('2d');
        new Chart(protCtx, {
            type: 'bar',
            data: {
                labels: ['Without Rate Limit', 'With 10/hour', 'With 3/hour (Current)'],
                datasets: [{
                    label: 'Potential Daily Cost (100 users)',
                    data: [9360.00, 936.00, 280.80], // Assuming unlimited, 10/hour, 3/hour
                    backgroundColor: ['#dc3545', '#ffc107', '#28a745'],
                    borderColor: ['#dc3545', '#ffc107', '#28a745'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Rate Limiting Protection Value'
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Daily Cost (USD)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });

        // Growth scenario chart
        const growthCtx = document.getElementById('growthChart').getContext('2d');
        new Chart(growthCtx, {
            type: 'area',
            data: {
                labels: ['Month 1', 'Month 2', 'Month 3', 'Month 6', 'Month 12'],
                datasets: [{
                    label: 'Conservative Growth',
                    data: [421, 842, 1263, 2526, 4212],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.2)',
                    fill: true
                }, {
                    label: 'Aggressive Growth',
                    data: [421, 1263, 4212, 12636, 21060],
                    borderColor: '#dc3545', 
                    backgroundColor: 'rgba(220, 53, 69, 0.2)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Monthly Cost Growth Scenarios (with batch savings)'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Timeline'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Monthly Cost (USD)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>